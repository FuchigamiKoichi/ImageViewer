<mxfile host="65bd71144e">
    <diagram id="clean-arch-diagram" name="Clean Architecture Class Diagram">
        <mxGraphModel dx="1618" dy="871" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1920" pageHeight="1080" background="#ffffff" math="0" shadow="0">
            <root>
                <mxCell id="0"/>
                <mxCell id="1" parent="0"/>
                <mxCell id="label-entities" value="Entities" style="text;strokeColor=none;fillColor=none;fontStyle=1;fontSize=16;align=left" parent="1" vertex="1">
                    <mxGeometry x="60" y="30" width="200" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="label-usecases" value="Use Cases (Interactors + Ports)" style="text;strokeColor=none;fillColor=none;fontStyle=1;fontSize=16;align=left" parent="1" vertex="1">
                    <mxGeometry x="360" y="30" width="340" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="label-adapters" value="Interface Adapters (Repositories/Gateways/Presenters)" style="text;strokeColor=none;fillColor=none;fontStyle=1;fontSize=16;align=left" parent="1" vertex="1">
                    <mxGeometry x="760" y="30" width="520" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="label-framework" value="Framework &amp; Drivers (Web/UI/Infra)" style="text;strokeColor=none;fillColor=none;fontStyle=1;fontSize=16;align=left" parent="1" vertex="1">
                    <mxGeometry x="1300" y="30" width="360" height="20" as="geometry"/>
                </mxCell>
                <mxCell id="lane-entities" value="" style="rounded=1;strokeColor=#c0c0c0;fillColor=#f9fbff;opacity=60;" parent="1" vertex="1">
                    <mxGeometry x="40" y="20" width="260" height="820" as="geometry"/>
                </mxCell>
                <mxCell id="lane-usecases" value="" style="rounded=1;strokeColor=#c0c0c0;fillColor=#f5fff5;opacity=60;" parent="1" vertex="1">
                    <mxGeometry x="320" y="20" width="380" height="820" as="geometry"/>
                </mxCell>
                <mxCell id="lane-adapters" value="" style="rounded=1;strokeColor=#c0c0c0;fillColor=#fff9f3;opacity=60;" parent="1" vertex="1">
                    <mxGeometry x="720" y="20" width="520" height="820" as="geometry"/>
                </mxCell>
                <mxCell id="lane-framework" value="" style="rounded=1;strokeColor=#c0c0c0;fillColor=#f7f7f7;opacity=60;" parent="1" vertex="1">
                    <mxGeometry x="1260" y="20" width="420" height="820" as="geometry"/>
                </mxCell>
                <mxCell id="class-image" value="&lt;b&gt;Image&lt;/b&gt;&lt;hr/&gt;+ id: string&lt;br/&gt;+ url: string&lt;br/&gt;+ width: number&lt;br/&gt;+ height: number&lt;br/&gt;+ createdAt: ISODate&lt;br/&gt;+ tags: string[]&lt;br/&gt;+ title?: string&lt;br/&gt;+ description?: string" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="60" y="80" width="240" height="200" as="geometry"/>
                </mxCell>
                <mxCell id="class-tag" value="&lt;b&gt;Tag&lt;/b&gt;&lt;hr/&gt;+ id: string&lt;br/&gt;+ name: string&lt;br/&gt;+ color?: string&lt;br/&gt;+ order?: number" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="60" y="300" width="240" height="120" as="geometry"/>
                </mxCell>
                <mxCell id="class-tabpreset" value="&lt;b&gt;TabPreset&lt;/b&gt;&lt;hr/&gt;+ id: string&lt;br/&gt;+ name: string&lt;br/&gt;+ tagIds: string[]&lt;br/&gt;+ logic: AND|OR" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
                    <mxGeometry x="60" y="440" width="240" height="130" as="geometry"/>
                </mxCell>
                <mxCell id="port-image-repo" value="&lt;&lt;interface&gt;&gt;&lt;br/&gt;&lt;b&gt;ImageRepository&lt;/b&gt;&lt;hr/&gt;+ listByFilter(q): Paged&lt;Image&gt;&lt;br/&gt;+ getById(id): Image&lt;br/&gt;+ upload(file, tags): Image (opt)" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f7e8;strokeColor=#7ea07e;dashed=0;" parent="1" vertex="1">
                    <mxGeometry x="340" y="80" width="300" height="160" as="geometry"/>
                </mxCell>
                <mxCell id="port-tag-repo" value="&lt;&lt;interface&gt;&gt;&lt;br/&gt;&lt;b&gt;TagRepository&lt;/b&gt;&lt;hr/&gt;+ listAll(): Tag[]" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f7e8;strokeColor=#7ea07e;" parent="1" vertex="1">
                    <mxGeometry x="340" y="260" width="300" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="port-tabpreset-repo" value="&lt;&lt;interface&gt;&gt;&lt;br/&gt;&lt;b&gt;TabPresetRepository&lt;/b&gt;&lt;hr/&gt;+ listAll(): TabPreset[]" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f7e8;strokeColor=#7ea07e;" parent="1" vertex="1">
                    <mxGeometry x="340" y="370" width="300" height="90" as="geometry"/>
                </mxCell>
                <mxCell id="port-url-state" value="&lt;&lt;interface&gt;&gt;&lt;br/&gt;&lt;b&gt;UrlStateGateway&lt;/b&gt;&lt;hr/&gt;+ read(): ViewerState&lt;br/&gt;+ write(state): void" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#e8f7e8;strokeColor=#7ea07e;" parent="1" vertex="1">
                    <mxGeometry x="340" y="480" width="300" height="110" as="geometry"/>
                </mxCell>
                <mxCell id="uc-filter" value="&lt;b&gt;FilterImagesUseCase&lt;/b&gt;&lt;hr/&gt;+ execute(criteria): Paged&lt;Image&gt;" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f5d5;strokeColor=#7ea07e;" parent="1" vertex="1">
                    <mxGeometry x="360" y="620" width="260" height="80" as="geometry"/>
                </mxCell>
                <mxCell id="uc-get-detail" value="&lt;b&gt;GetImageDetailUseCase&lt;/b&gt;&lt;hr/&gt;+ execute(id): Image" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f5d5;strokeColor=#7ea07e;" parent="1" vertex="1">
                    <mxGeometry x="360" y="710" width="260" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="uc-navigate" value="&lt;b&gt;NavigateImagesUseCase&lt;/b&gt;&lt;hr/&gt;+ next(state): Image&lt;br/&gt;+ prev(state): Image" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f5d5;strokeColor=#7ea07e;" parent="1" vertex="1">
                    <mxGeometry x="360" y="500" width="260" height="100" as="geometry"/>
                </mxCell>
                <mxCell id="uc-zoom" value="&lt;b&gt;ToggleZoomModeUseCase&lt;/b&gt;&lt;hr/&gt;+ execute(mode): ViewerState" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f5d5;strokeColor=#7ea07e;" parent="1" vertex="1">
                    <mxGeometry x="360" y="430" width="260" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="uc-url" value="&lt;b&gt;UpdateUrlStateUseCase&lt;/b&gt;&lt;hr/&gt;+ execute(state): void" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f5d5;strokeColor=#7ea07e;" parent="1" vertex="1">
                    <mxGeometry x="360" y="390" width="260" height="50" as="geometry"/>
                </mxCell>
                <mxCell id="uc-upload" value="&lt;b&gt;UploadImageUseCase&lt;/b&gt; (optional)&lt;hr/&gt;+ execute(file, tags): Image" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#d5f5d5;strokeColor=#7ea07e;" parent="1" vertex="1">
                    <mxGeometry x="360" y="800" width="260" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="impl-image-repo" value="&lt;b&gt;RestImageRepository&lt;/b&gt;&lt;br/&gt;(implements ImageRepository)" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6d5;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="760" y="80" width="300" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="impl-tag-repo" value="&lt;b&gt;RestTagRepository&lt;/b&gt;&lt;br/&gt;(implements TagRepository)" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6d5;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="760" y="160" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="impl-tabpreset-repo" value="&lt;b&gt;RestTabPresetRepository&lt;/b&gt;&lt;br/&gt;(implements TabPresetRepository)" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6d5;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="760" y="230" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="impl-url-state" value="&lt;b&gt;UrlStateGatewayImpl&lt;/b&gt;&lt;br/&gt;(implements UrlStateGateway)" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6d5;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="760" y="300" width="300" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="presenter-gallery" value="&lt;b&gt;GalleryPresenter&lt;/b&gt;" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#fff0e6;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="1080" y="80" width="180" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="presenter-viewer" value="&lt;b&gt;ViewerPresenter&lt;/b&gt;" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#fff0e6;strokeColor=#d79b00;" parent="1" vertex="1">
                    <mxGeometry x="1080" y="150" width="180" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="ui-gallery" value="&lt;b&gt;GalleryPage (React/Vue)&lt;/b&gt;" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#888888;" parent="1" vertex="1">
                    <mxGeometry x="1300" y="80" width="320" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="ui-viewer" value="&lt;b&gt;ViewerOverlay (React/Vue)&lt;/b&gt;" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#888888;" parent="1" vertex="1">
                    <mxGeometry x="1300" y="160" width="320" height="70" as="geometry"/>
                </mxCell>
                <mxCell id="ui-header" value="&lt;b&gt;HeaderTabs (React/Vue)&lt;/b&gt;" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#888888;" parent="1" vertex="1">
                    <mxGeometry x="1300" y="240" width="320" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="infra-router" value="&lt;b&gt;Router / History API&lt;/b&gt;" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#888888;" parent="1" vertex="1">
                    <mxGeometry x="1300" y="320" width="320" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="infra-sw" value="&lt;b&gt;ServiceWorker (PWA)&lt;/b&gt;" style="shape=rect;rounded=1;whiteSpace=wrap;html=1;fillColor=#f0f0f0;strokeColor=#888888;" parent="1" vertex="1">
                    <mxGeometry x="1300" y="390" width="320" height="60" as="geometry"/>
                </mxCell>
                <mxCell id="impl-edge-1" style="endArrow=block;endFill=0;strokeColor=#d79b00;" parent="1" source="impl-image-repo" target="port-image-repo" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="impl-edge-2" style="endArrow=block;endFill=0;strokeColor=#d79b00;" parent="1" source="impl-tag-repo" target="port-tag-repo" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="impl-edge-3" style="endArrow=block;endFill=0;strokeColor=#d79b00;" parent="1" source="impl-tabpreset-repo" target="port-tabpreset-repo" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="impl-edge-4" style="endArrow=block;endFill=0;strokeColor=#d79b00;" parent="1" source="impl-url-state" target="port-url-state" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="dep-edge-1" style="dashed=1;endArrow=open;endFill=0;strokeColor=#7ea07e;" parent="1" source="uc-filter" target="port-image-repo" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="dep-edge-1b" style="dashed=1;endArrow=open;endFill=0;strokeColor=#7ea07e;" parent="1" source="uc-filter" target="port-tag-repo" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="dep-edge-1c" style="dashed=1;endArrow=open;endFill=0;strokeColor=#7ea07e;" parent="1" source="uc-filter" target="port-tabpreset-repo" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="dep-edge-2" style="dashed=1;endArrow=open;endFill=0;strokeColor=#7ea07e;" parent="1" source="uc-get-detail" target="port-image-repo" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="dep-edge-3" style="dashed=1;endArrow=open;endFill=0;strokeColor=#7ea07e;" parent="1" source="uc-navigate" target="port-image-repo" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="dep-edge-4" style="dashed=1;endArrow=open;endFill=0;strokeColor=#7ea07e;" parent="1" source="uc-url" target="port-url-state" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="dep-edge-5" style="dashed=1;endArrow=open;endFill=0;strokeColor=#7ea07e;" parent="1" source="uc-upload" target="port-image-repo" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="ui-edge-1" style="endArrow=block;endFill=1;strokeColor=#888888;" parent="1" source="ui-gallery" target="presenter-gallery" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="ui-edge-2" style="endArrow=block;endFill=1;strokeColor=#888888;" parent="1" source="presenter-gallery" target="uc-filter" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="ui-edge-3" style="endArrow=block;endFill=1;strokeColor=#888888;" parent="1" source="ui-viewer" target="presenter-viewer" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="ui-edge-4" style="endArrow=block;endFill=1;strokeColor=#888888;" parent="1" source="presenter-viewer" target="uc-get-detail" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="ui-edge-5" style="endArrow=block;endFill=1;strokeColor=#888888;" parent="1" source="presenter-viewer" target="uc-navigate" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="ui-edge-6" style="endArrow=block;endFill=1;strokeColor=#888888;" parent="1" source="router-edge-src" target="uc-url" edge="1">
                    <mxGeometry relative="1" as="geometry"/>
                </mxCell>
                <mxCell id="router-edge-src" value="" style="shape=triangle;opacity=0;" parent="1" vertex="1">
                    <mxGeometry x="1310" y="350" width="10" height="10" as="geometry"/>
                </mxCell>
                <mxCell id="note-1" value="Dependencies point inward only. Implementations live outside and realize ports defined by Use Cases." style="shape=note;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
                    <mxGeometry x="890" y="660" width="500" height="80" as="geometry"/>
                </mxCell>
            </root>
        </mxGraphModel>
    </diagram>
</mxfile>